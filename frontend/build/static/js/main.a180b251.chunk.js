(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{132:function(e,t,a){},133:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(27),c=a.n(r),s=a(11),i=a(67),o=a(115),l=a(116),u=a(26),j="PAGE_LIST_REQUEST",d="PAGE_LIST_SUCCESS",b="PAGE_LIST_FAIL",p="PAGE_DETAILS_REQUEST",h="PAGE_DETAILS_SUCCESS",O="PAGE_DETAILS_FAIL",m="PAGE_CREATE_REQUEST",x="PAGE_CREATE_SUCCESS",g="PAGE_CREATE_FAIL",f="PAGE_DELETE_REQUEST",v="PAGE_DELETE_SUCCESS",y="PAGE_DELETE_FAIL",E="PAGE_UPDATE_REQUEST",C="PAGE_UPDATE_SUCCESS",S="PAGE_UPDATE_FAIL",w="USER_LOGIN_REQUEST",N="USER_LOGIN_SUCCESS",k="USER_LOGIN_FAIL",L="USER_LOGOUT",I="USER_REGISTER_REQUEST",A="USER_REGISTER_SUCCESS",T="USER_REGISTER_FAIL",_="USER_DETAILS_REQUEST",G="USER_DETAILS_SUCCESS",P="USER_DETAILS_FAIL",U="USER_UPDATE_PROFILE_REQUEST",R="USER_UPDATE_PROFILE_SUCCESS",F="USER_UPDATE_PROFILE_FAIL",D=Object(i.combineReducers)({pageList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return{loading:!0,pages:[]};case d:return{loading:!1,pages:t.payload};case b:return{loading:!1,error:t.payload};default:return e}},pageDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:{files:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)({loading:!0},e);case h:return{loading:!1,page:t.payload};case O:return{loading:!1,error:t.payload};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{loading:!0};case N:return{loading:!1,userInfo:t.payload};case k:return{loading:!1,error:t.payload};case L:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0};case A:return{loading:!1,userInfo:t.payload};case T:return{loading:!1,error:t.payload};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case G:return{loading:!1,user:t.payload};case P:return{loading:!1,error:t.payload};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(u.a)(Object(u.a)({},e),{},{success:!1,error:null,loading:!0});case R:return{loading:!1,success:!0,userInfo:t.payload};case F:return{loading:!1,success:!1,error:t.payload};default:return e}},pageCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:{files:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)({loading:!0},e);case x:return{loading:!1,page:t.payload};case g:return{loading:!1,error:t.payload};default:return e}},pageDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(u.a)({loading:!0},e);case v:return{loading:!1};case y:return{loading:!1,error:t.payload};default:return e}},pageUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:{files:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(u.a)({loading:!0},e);case C:return{loading:!1,page:t.payload};case S:return{loading:!1,error:t.payload};default:return e}}}),q={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},B=[o.a],z=Object(i.createStore)(D,q,Object(l.composeWithDevTools)(i.applyMiddleware.apply(void 0,B))),H=(a(132),a(133),a(71)),Q=a(17),V=a(261),M=a(9),W=a(269),J=a(270),K=a(267),X=a(268),Y=a(119),Z=a(118),$=a(20),ee=a(21),te=a.n(ee),ae=a(39),ne=a(29),re=a.n(ne),ce=a(1),se=function(){var e=Object(s.b)(),t=Object(n.useState)(""),a=Object(M.a)(t,2),r=a[0],c=a[1],i=Object(s.c)((function(e){return e.userLogin})).userInfo;return Object(ce.jsx)("header",{children:Object(ce.jsx)(W.a,{bg:"light",expand:"lg",collapseOnSelect:!0,children:Object(ce.jsxs)(V.a,{children:[Object(ce.jsx)($.LinkContainer,{to:"/",children:Object(ce.jsx)(W.a.Brand,{children:"oKeeper"})}),Object(ce.jsx)(W.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(ce.jsx)(W.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:Object(ce.jsxs)(J.a,{className:"ml-auto",children:[i?Object(ce.jsxs)(K.a,{title:i.userName,id:"userName",children:[Object(ce.jsx)($.LinkContainer,{to:"/".concat(i.userName),children:Object(ce.jsx)(K.a.Item,{children:"Pages"})}),Object(ce.jsx)($.LinkContainer,{to:"/".concat(i.userName,"/profile"),children:Object(ce.jsx)(K.a.Item,{children:"Profile"})}),Object(ce.jsx)(K.a.Item,{onClick:function(){e((function(e){localStorage.removeItem("userInfo"),e({type:L})}))},children:"Logout"})]}):Object(ce.jsx)($.LinkContainer,{to:"/",children:Object(ce.jsxs)(J.a.Link,{children:[Object(ce.jsx)("i",{className:"fas fa-user"})," Sign In"]})}),Object(ce.jsx)(J.a.Item,{className:"mx-3",children:Object(ce.jsxs)(X.a,{className:"d-flex",children:[Object(ce.jsx)(Y.a,{type:"search",placeholder:"Search a user...",className:"mr-2","aria-label":"Search",value:r,onChange:function(e){return c(e.target.value)}}),Object(ce.jsx)(Z.a,{variant:"outline-dark",className:"mx-1",children:"Search"})]})})]})})]})})})},ie=a(262),oe=a(120),le=a(272),ue=a(271),je=a(264),de=a(263),be=function(e){var t=e.variant,a=e.children;return Object(ce.jsx)(de.a,{variant:t,children:a})};be.defaultProps={variant:"info"};var pe=be,he=a(121),Oe=function(){return Object(ce.jsx)(he.PuffLoader,{color:"#36D7B7",css:{width:"100px",height:"100px",margin:"50%"}})},me=function(e){var t=e.history,a=Object(n.useState)(!0),r=Object(M.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(""),l=Object(M.a)(o,2),u=l[0],j=l[1],d=Object(n.useState)(""),b=Object(M.a)(d,2),p=b[0],h=b[1],O=Object(n.useState)(""),m=Object(M.a)(O,2),x=m[0],g=m[1],f=Object(n.useState)(""),v=Object(M.a)(f,2),y=v[0],E=v[1],C=Object(n.useState)(null),S=Object(M.a)(C,2),L=S[0],_=S[1],G=function(e){_(e),setTimeout((function(){_(null)}),5e3)},P=Object(s.b)(),U=Object(s.c)((function(e){return e.userLogin})),R=Object(s.c)((function(e){return e.userRegister})),F=R.userInfo?R:U,D=F.loading,q=F.error,B=F.userInfo;Object(n.useEffect)((function(){B&&B.userName&&t.push("/".concat(B.userName))}),[t,B]);return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("h1",{children:"Welcome to oKeeper!"}),Object(ce.jsx)("p",{children:"The place to keep and share your stuff! notes, files, assays and more!"}),L&&Object(ce.jsx)(pe,{variant:"danger",children:L}),q&&Object(ce.jsx)(pe,{variant:"danger",children:q}),D&&Object(ce.jsx)(Oe,{}),Object(ce.jsx)(X.a,{children:Object(ce.jsx)(X.a.Group,{children:Object(ce.jsx)(X.a.Check,{type:"checkbox",label:"Have an acount?",checked:c,onChange:function(){return i(!c)}})})}),Object(ce.jsx)(le.a,{className:"p-3 m-0 mt-3",children:c?Object(ce.jsxs)(X.a,{children:[Object(ce.jsxs)(ie.a,{className:"mb-3",children:[Object(ce.jsxs)(X.a.Group,{as:oe.a,controlId:"formGridEmail",children:[Object(ce.jsx)(X.a.Label,{children:"Email"}),Object(ce.jsx)(X.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return h(e.target.value)},value:p,as:Y.a})]}),Object(ce.jsxs)(X.a.Group,{as:oe.a,controlId:"formGridPassword",children:[Object(ce.jsx)(X.a.Label,{children:"Password"}),Object(ce.jsx)(X.a.Control,{type:"password",placeholder:"Enter password",onChange:function(e){return g(e.target.value)},value:x})]})]}),Object(ce.jsx)(ie.a,{children:Object(ce.jsx)(V.a,{children:Object(ce.jsx)(Z.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault(),G(null),P(function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n){var r,c,s;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:w}),r={headers:{"Content-Type":"application/json"}},a.next=5,re.a.post("/api/user/login",{email:e,password:t},r);case 5:c=a.sent,s=c.data,n({type:N,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:k,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(p,x))},children:"Submit"})})})]}):Object(ce.jsxs)(X.a,{children:[Object(ce.jsxs)(ie.a,{className:"mb-3",children:[Object(ce.jsxs)(X.a.Group,{as:oe.a,controlId:"formGridUserName",children:[Object(ce.jsxs)(X.a.Label,{children:["User Name:",Object(ce.jsx)(ue.a,{overlay:Object(ce.jsx)(je.a,{children:"After creating your user you will not be able to change your user name."}),children:Object(ce.jsx)("i",{class:"far fa-question-circle mx-1"})})]}),Object(ce.jsx)(X.a.Control,{type:"text",placeholder:"Enter user name:",onChange:function(e){return j(e.target.value)},value:u,as:Y.a})]}),Object(ce.jsxs)(X.a.Group,{as:oe.a,controlId:"formGridEmail",children:[Object(ce.jsx)(X.a.Label,{children:"Email"}),Object(ce.jsx)(X.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return h(e.target.value)},value:p,as:Y.a})]})]}),Object(ce.jsxs)(ie.a,{className:"mb-3",children:[Object(ce.jsxs)(X.a.Group,{as:oe.a,controlId:"formGridPassword",children:[Object(ce.jsx)(X.a.Label,{children:"Password"}),Object(ce.jsx)(X.a.Control,{type:"password",placeholder:"Enter password",onChange:function(e){return g(e.target.value)},value:x})]}),Object(ce.jsxs)(X.a.Group,{as:oe.a,controlId:"formGridPassword",children:[Object(ce.jsx)(X.a.Label,{children:"Confirm Password:"}),Object(ce.jsx)(X.a.Control,{type:"password",placeholder:"Confirm password",onChange:function(e){return E(e.target.value)},value:y})]})]}),Object(ce.jsx)(Z.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault(),u?p?x&&y?x!==y?G("passwords do not match"):(G(null),P(function(e,t,a){return function(){var n=Object(ae.a)(te.a.mark((function n(r){var c,s,i;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:I}),c={headers:{"Content-Type":"application/json"}},n.next=5,re.a.post("/api/user/",{userName:e,email:t,password:a},c);case 5:s=n.sent,i=s.data,r({type:A,payload:i}),r({type:N,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),r({type:T,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(u,p,x))):G("Password is required"):G("Email is required"):G("User Name is required")},children:"Submit"})]})})]})},xe=function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n,r){var c,s,i;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n({type:f}),c=r(),!(s=c.userLogin.userInfo)||!s.token){a.next=11;break}return i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=7,re.a.delete("/".concat(e,"/api/pages/delete/any"),Object(u.a)(Object(u.a)({},i),{},{data:Object(u.a)({},t)}));case 7:return a.sent,a.next=10,re.a.delete("/".concat(e,"/api/pages/delete"),{data:Object(u.a)({},t)});case 10:a.sent;case 11:n({type:v}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),n({type:y,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e,t){return a.apply(this,arguments)}}()},ge=function(e){var t;for(e=e.split("").reverse(),t=0;t<e.length;t++){if("/"==e[t])break}return e.length=t,e.reverse(),e.join(""),e},fe=function(e){var t=e.page,a=e.userName;e.history,Object(s.b)();return Object(ce.jsx)($.LinkContainer,{to:"/".concat(a,"/page/").concat(t._id),style:{display:"grid",gridTemplateRows:"\n                15% \n                auto \n                auto\n            ",gridTemplateAreas:"\n                'name name name'\n                'text text text'\n                'files files files'\n            ",columnGap:"10px",rowGap:"10px",cursor:"pointer"},children:Object(ce.jsxs)(le.a,{className:"my-3 p-3 rounded page",children:[Object(ce.jsx)(le.a.Title,{style:{gridArea:"name"},className:"m-0",children:t.name}),t.text?Object(ce.jsx)(le.a.Text,{style:{gridArea:"text"},className:"m-0",children:t.text}):t.text="",t.files.map((function(e){return Object(ce.jsx)(le.a.Text,{style:{gridArea:"files"},className:"m-0",children:Object(ce.jsx)("a",{href:e,download:!0,children:Object(ce.jsx)(Z.a,{variant:"outline-dark",children:ge(e)})})},e)}))]})})},ve=function(e){var t=e.match,a=e.history,r=Object(s.b)(),c=Object(s.c)((function(e){return e.pageList})),i=c.loading,o=c.error,l=c.pages,u=Object(s.c)((function(e){return e.userLogin})).userInfo;Object(n.useEffect)((function(){var e;r((e=t.params.userName,function(){var t=Object(ae.a)(te.a.mark((function t(a,n){var r,c,s,i,o;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a({type:j}),r=n(),!(c=r.userLogin.userInfo)||!c.token){t.next=10;break}return i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=7,re.a.get("/".concat(e,"/api/pages/all"),i);case 7:s=t.sent,t.next=13;break;case 10:return t.next=12,re.a.get("/".concat(e,"/api/pages"));case 12:s=t.sent;case 13:o=s.data,a({type:d,payload:o}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),a({type:b,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[r,u]);var p=function(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsx)(le.a,{className:"my-3 p-0 rounded",children:Object(ce.jsx)($.LinkContainer,{to:"/".concat(t.params.userName,"/new-page"),children:Object(ce.jsx)(Z.a,{variant:"light",type:"submit",size:"lg",children:Object(ce.jsx)("i",{className:"fas fa-plus"})})})})})};return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsxs)("h1",{children:[t.params.userName,"'s pages:"]}),i?Object(ce.jsx)(Oe,{}):o?Object(ce.jsx)(pe,{variant:"danger",children:o}):Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(ie.a,{children:l.map((function(e){return Object(ce.jsx)(oe.a,{sm:12,md:6,lg:4,xl:3,children:Object(ce.jsx)(fe,{page:e,userName:t.params.userName,history:a})},e.name)}))}),u&&Object(ce.jsx)(ie.a,{children:Object(ce.jsx)(p,{})})]})]})},ye=a(266),Ee=a(265),Ce=function(e){var t=e.match,a=e.history,r=Object(n.useState)(""),c=Object(M.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(""),u=Object(M.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)([]),p=Object(M.a)(b,2),h=p[0],O=p[1],f=Object(n.useState)(!1),v=Object(M.a)(f,2),y=v[0],E=v[1],C=Object(n.useState)(!1),S=Object(M.a)(C,2),w=S[0],N=S[1],k=Object(n.useState)(!1),L=Object(M.a)(k,2),I=L[0],A=L[1],T=Object(n.useState)(!1),_=Object(M.a)(T,2),G=_[0],P=_[1],U=Object(n.useState)(!1),R=Object(M.a)(U,2),F=R[0],D=R[1],q=Object(n.useState)(null),B=Object(M.a)(q,2),z=B[0],H=B[1],Q=Object(s.b)(),V=function(){P(!1),A(!I)},W=function(){D(!1),E(!y)},J=function(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(ye.a,{show:G,onHide:V,centered:!0,children:[Object(ce.jsx)(ye.a.Header,{children:Object(ce.jsx)(ye.a.Title,{children:"Public Editing"})}),Object(ce.jsx)(ye.a.Body,{className:"p-4",children:"Please note that one factor authentication is required. In order to edit this page from an unauthorized computer, you will have to enter a code that will be sent to you via SMS or email"}),Object(ce.jsxs)(ye.a.Footer,{children:[Object(ce.jsx)(Z.a,{variant:"light",onClick:V,children:"Cancel"}),Object(ce.jsx)(Z.a,{variant:"dark",onClick:function(){return P(!1)},children:"Save Changes"})]})]})})},K=function(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(ye.a,{show:F,onHide:W,centered:!0,children:[Object(ce.jsx)(ye.a.Header,{children:Object(ce.jsx)(ye.a.Title,{children:"Public Viewing"})}),Object(ce.jsxs)(ye.a.Body,{className:"p-4",children:["By setting viewing public, you can decide whether or not one factor authentication is required.",Object(ce.jsx)("br",{}),"What does that mean? When set to true, in order to view the note from an unauthorized computer you will have to enter a code that will be sent to you via SMS or email."]}),Object(ce.jsxs)(ye.a.Footer,{children:[Object(ce.jsx)(Z.a,{variant:"light",onClick:W,children:"Cancel"}),Object(ce.jsx)(Z.a,{variant:"dark",onClick:function(){return D(!1)},children:"Okay"})]})]})})};return Object(ce.jsxs)(ce.Fragment,{children:[z&&Object(ce.jsx)(pe,{variant:"danger",children:z}),Object(ce.jsx)($.LinkContainer,{to:"/".concat(t.params.userName),children:Object(ce.jsx)(Z.a,{variant:"light",className:"p-0",children:Object(ce.jsx)(le.a,{className:"p-3",children:Object(ce.jsx)("i",{className:"fas fa-arrow-left"})})})}),Object(ce.jsxs)(le.a,{className:"p-3",children:[Object(ce.jsx)(le.a.Title,{children:"Create a new page:"}),Object(ce.jsxs)(X.a,{children:[Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"page name"}),Object(ce.jsx)(X.a.Control,{type:"text",placeholder:"Enter name",value:i,onChange:function(e){return o(e.target.value)},required:!0})]}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"page text"}),Object(ce.jsx)(X.a.Control,{type:"text",placeholder:"Enter text",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(ce.jsx)(X.a.Group,{className:"mb-3",children:Object(ce.jsx)(X.a.Control,{type:"file",multiple:!0,value:h,onChange:function(e){return O(e.target.value)}})}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"Is viewing Public?"}),Object(ce.jsx)(Ee.a,{checked:y,onChange:function(){E(!y),y||D(!0)}})]}),y&&Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsxs)(X.a.Label,{children:["Is one factor authentication required for viewing this page?",Object(ce.jsx)(ue.a,{overlay:Object(ce.jsx)(je.a,{children:"In order to view the note from an unauthorized computer you will have to enter a code that will be sent to you via SMS or email."}),children:Object(ce.jsx)("i",{class:"far fa-question-circle mx-1"})})]}),Object(ce.jsx)(Ee.a,{checked:w,onChange:function(){return N(!w)}})]}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"Is Editing Public?"}),Object(ce.jsx)(Ee.a,{checked:I,onChange:function(){A(!I),I||P(!0)}})]}),Object(ce.jsx)($.LinkContainer,{to:"/".concat(t.params.userName),disabled:!i||i.length<1,children:Object(ce.jsx)(Z.a,{variant:"outline-dark",type:"submit",onClick:function(e){var n,r;i?(Q((n=t.params.userName,r={name:i,text:j,files:h,publicViewing:y,isOneFactorAuthReqForViewing:w,publicEditing:I},function(){var e=Object(ae.a)(te.a.mark((function e(t,a){var c,s,i,o,l;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:m}),c=a(),s=c.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,re.a.post("/".concat(n,"/api/pages/new"),r,i);case 6:o=e.sent,l=o.data,t({type:x,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:g,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())),a.push("/".concat(t.params.userName)),a.go(0)):H("Name is required")},children:"create!"})})]})]}),Object(ce.jsx)(J,{}),Object(ce.jsx)(K,{})]})},Se=a(64),we=function(e){var t,a=e.match,r=e.history,c=Object(s.b)(),i=Object(s.c)((function(e){return e.pageDetails})),o=i.loading,l=i.error,u=i.page,j=Object(s.c)((function(e){return e.userLogin})).userInfo,d=Object(n.useState)(!1),b=Object(M.a)(d,2),m=b[0],x=b[1],g=Object(n.useState)(u?u.name:""),f=Object(M.a)(g,2),v=f[0],y=f[1],w=Object(n.useState)(u?u.text:""),N=Object(M.a)(w,2),k=N[0],L=N[1],I=Object(n.useState)(u?u.files:[]),A=Object(M.a)(I,2),T=A[0],_=A[1],G=Object(n.useState)(!!u&&u.publicViewing),P=Object(M.a)(G,2),U=P[0],R=P[1],F=Object(n.useState)(!!u&&u.publicEditing),D=Object(M.a)(F,2),q=D[0],B=D[1],z=Object(n.useState)(!1),H=Object(M.a)(z,2),Q=H[0],V=H[1],W=Object(n.useState)(!1),J=Object(M.a)(W,2),K=J[0],Y=J[1],ee=Object(n.useState)(!1),ne=Object(M.a)(ee,2),se=ne[0],ie=ne[1];Object(n.useEffect)((function(){var e,t;c((e=a.params.userName,t=a.params.id,function(){var a=Object(ae.a)(te.a.mark((function a(n,r){var c,s,i,o,l;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n({type:p}),c=r(),!(s=c.userLogin.userInfo)||!s.token){a.next=10;break}return o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=7,re.a.get("/".concat(e,"/api/pages/").concat(t,"/any"),o);case 7:i=a.sent,a.next=13;break;case 10:return a.next=12,re.a.get("/".concat(e,"/api/pages/").concat(t));case 12:i=a.sent;case 13:l=i.data,n({type:h,payload:l}),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),n({type:O,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}()))}),[a,c,m,j]),Object(n.useEffect)((function(){y(u.name),u.text?L(u.text):L(""),u.files?_(u.files):_([]),R(u.publicViewing),B(u.publicEditing),V(u.isOneFactorAuthReqForViewing)}),[u]);var oe=function(e,t,n,r,s,i){var o={_id:u._id,name:e,text:t,files:n,publicViewing:r,publicEditing:s,isOneFactorAuthReqForViewing:i};console.log(o),x(!1),c(function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n,r){var c,s,i,o,l;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:E}),c=r(),s=c.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,re.a.put("/".concat(e,"/api/pages/edit"),t,i);case 6:o=a.sent,l=o.data,n({type:C,payload:l}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:S,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(a.params.userName,o))},de=function(){Y(!1),B(!q)},be=function(){ie(!1),R(!U)},he=function(){x(!m)},me=function(){c(xe(a.params.userName,u)),r.push("/".concat(a.params.userName)),r.go(0)},fe=function(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(ye.a,{show:K,onHide:de,centered:!0,children:[Object(ce.jsx)(ye.a.Header,{children:Object(ce.jsx)(ye.a.Title,{children:"Public Editing"})}),Object(ce.jsx)(ye.a.Body,{className:"p-4",children:"Please note that one factor authentication is required. In order to edit this page from an unauthorized computer, you will have to enter a code that will be sent to you via SMS or email"}),Object(ce.jsxs)(ye.a.Footer,{children:[Object(ce.jsx)(Z.a,{variant:"light",onClick:de,children:"Cancel"}),Object(ce.jsx)(Z.a,{variant:"dark",onClick:function(){return Y(!1)},children:"Save Changes"})]})]})})},ve=function(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(ye.a,{show:se,onHide:be,centered:!0,children:[Object(ce.jsx)(ye.a.Header,{children:Object(ce.jsx)(ye.a.Title,{children:"Public Viewing"})}),Object(ce.jsxs)(ye.a.Body,{className:"p-4",children:["By setting viewing public, you can decide whether or not one factor authentication is required.",Object(ce.jsx)("br",{}),"What does that mean? When set to true, in order to view the note from an unauthorized computer you will have to enter a code that will be sent to you via SMS or email."]}),Object(ce.jsxs)(ye.a.Footer,{children:[Object(ce.jsx)(Z.a,{variant:"light",onClick:be,children:"Cancel"}),Object(ce.jsx)(Z.a,{variant:"dark",onClick:function(){return ie(!1)},children:"Okay"})]})]})})};return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)($.LinkContainer,{to:"/".concat(a.params.userName),children:Object(ce.jsx)(Z.a,{variant:"light",className:"p-0",children:Object(ce.jsx)(le.a,{className:"p-3",children:Object(ce.jsx)("i",{className:"fas fa-arrow-left"})})})}),o?Object(ce.jsx)(Oe,{}):l?Object(ce.jsx)(pe,{variant:"danger",children:l}):m&&(q||j)?Object(ce.jsxs)(le.a,{className:"p-4",style:{display:"grid",gridTemplateColumns:"\n                        25%\n                        25%\n                        25%\n                        25%\n                    ",gridTemplateAreas:"\n                        'title title title title'\n                        'name name name name'\n                        'text text text text'\n                        'files files files files'\n                        'viewing viewing viewing viewing'\n                        'factorAuth factorAuth editing editing'\n                        '. . . .'\n                        'edit edit delete delete'\n                        'submit submit submit submit'\n                    ",columnGap:"10px",rowGap:"10px",alignItems:"center",justifyContent:"stretch",alignContent:"stretch"},children:[Object(ce.jsx)(le.a.Title,{style:{gridArea:"title",textAlign:"center"},children:"Edit a page:"}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",style:{gridArea:"name"},children:[Object(ce.jsx)(X.a.Label,{children:"Enter Name: "}),Object(ce.jsx)(X.a.Control,{type:"text",placeholder:"Enter name",value:v,onChange:function(e){return y(e.target.value)},required:!0})]}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",style:{gridArea:"text"},children:[Object(ce.jsx)(X.a.Label,{children:"page text"}),Object(ce.jsx)(X.a.Control,{type:"text",as:"textarea",placeholder:"Enter text",value:k,onChange:function(e){return L(e.target.value)},style:{resize:"none",height:"100px"}})]},"text"),Object(ce.jsx)(X.a.Group,{className:"mb-3",style:{gridArea:"files"},children:Object(ce.jsx)(X.a.Control,{type:"file",multiple:!0,value:T,onChange:function(e){return _(e.target.value)}})}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",style:{gridArea:"viewing"},children:[Object(ce.jsx)(X.a.Label,{children:"Is viewing Public?"}),Object(ce.jsx)(Ee.a,{checked:U,onChange:function(){R(!U),U||ie(!0)}})]}),U&&Object(ce.jsxs)(X.a.Group,{className:"mb-3",style:{gridArea:"factorAuth"},children:[Object(ce.jsxs)(X.a.Label,{children:["Is one factor authentication required for viewing this page?",Object(ce.jsx)(ue.a,{overlay:Object(ce.jsx)(je.a,{children:"In order to view the note from an unauthorized computer you will have to enter a code that will be sent to you via SMS or email."}),children:Object(ce.jsx)("i",{class:"far fa-question-circle mx-1"})})]}),Object(ce.jsx)(Ee.a,{checked:Q,onChange:function(){return V(!Q)}})]}),U&&Object(ce.jsxs)(X.a.Group,{className:"mb-3",style:{gridArea:"editing"},children:[Object(ce.jsx)(X.a.Label,{children:"Is Editing Public?"}),Object(ce.jsx)(Ee.a,{checked:q,onChange:function(){B(!q),q||Y(!0)}})]}),Object(ce.jsx)(Z.a,{variant:"outline-success",type:"submit",onClick:he,className:"p-2",style:{gridArea:"edit"},children:Object(ce.jsx)("i",{className:"fas fa-edit"})}),Object(ce.jsx)(Z.a,{variant:"outline-danger",onClick:me,style:{gridArea:"delete"},disabled:!(q||j),children:Object(ce.jsx)("i",{className:"fas fa-trash-alt"})}),Object(ce.jsx)($.LinkContainer,{to:"/".concat(a.params.userName),disabled:!v||v.length<1,style:{gridArea:"submit"},children:Object(ce.jsx)(Z.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault(),oe(v,k,T,U,q,Q)},children:"Update!"})})]}):Object(ce.jsxs)(le.a,{className:"p-4",style:{display:"grid",gridTemplateRows:"\n                        15%\n                        auto\n                        auto\n                        15%\n                        15%\n                    ",gridTemplateAreas:"\n                        '. name name .'\n                        'text text text text'\n                        'files files files files'\n                        '. . . .'\n                        'edit edit delete delete'\n                        'submit submit submit submit'\n                    ",columnGap:"10px",rowGap:"10px",alignItems:"center",justifyContent:"stretch",alignContent:"stretch"},children:[Object(ce.jsx)(le.a.Title,{style:{gridArea:"name",textAlign:"center"},children:v}),Object(ce.jsx)(X.a.Label,{style:{gridArea:"text"},children:k}),T.map((function(e){return Object(ce.jsx)(le.a.Text,{style:{gridArea:"files"},className:"m-0",children:Object(ce.jsx)("a",{href:e,download:!0,children:Object(ce.jsx)(Z.a,{variant:"outline-dark",children:ge(e)})})},e)})),Object(ce.jsx)(Z.a,{variant:"outline-success",type:"submit",onClick:he,className:"p-2",disabled:!(q||j),style:{gridArea:"edit"},children:Object(ce.jsx)("i",{className:"fas fa-edit"})}),Object(ce.jsx)(Z.a,{variant:"outline-danger",onClick:me,style:{gridArea:"delete"},disabled:!(q||j),children:Object(ce.jsx)("i",{className:"fas fa-trash-alt"})}),Object(ce.jsx)($.LinkContainer,(t={to:"/".concat(a.params.userName),disabled:!v||v.length<1,style:{gridArea:"submit"}},Object(Se.a)(t,"disabled",!0),Object(Se.a)(t,"children",Object(ce.jsx)(Z.a,{variant:"outline-dark",type:"submit",onClick:oe,children:"Update!"})),t))]}),Object(ce.jsx)(fe,{}),Object(ce.jsx)(ve,{})]})},Ne=function(e){var t=e.match,a=e.history,r=Object(n.useState)(""),c=Object(M.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(""),u=Object(M.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(""),p=Object(M.a)(b,2),h=p[0],O=p[1],m=Object(n.useState)(""),x=Object(M.a)(m,2),g=x[0],f=x[1],v=Object(n.useState)(null),y=Object(M.a)(v,2),E=y[0],C=y[1],S=Object(s.b)(),w=Object(s.c)((function(e){return e.userDetails})),N=w.loading,k=w.error,L=w.user,I=Object(s.c)((function(e){return e.userLogin})).userInfo,A=Object(s.c)((function(e){return e.userUpdateProfile})).success;Object(n.useEffect)((function(){I?L&&L.userName?(o(L.userName),d(L.email)):S(function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n,r){var c,s,i,o,l;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:_}),c=r(),s=c.userLogin.userInfo,console.log(s),i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=7,re.a.get("/".concat(e,"/api/user/").concat(t),i);case 7:o=a.sent,l=o.data,n({type:G,payload:l}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),n({type:P,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()}(t.params.userName,"profile")):a.push("/")}),[a,I,S,L]);return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)($.LinkContainer,{to:"/".concat(t.params.userName),children:Object(ce.jsx)(Z.a,{variant:"light",className:"p-0",children:Object(ce.jsx)(le.a,{className:"p-3",children:Object(ce.jsx)("i",{className:"fas fa-arrow-left"})})})}),E&&Object(ce.jsx)(pe,{variant:"danger",children:E}),k&&Object(ce.jsx)(pe,{variant:"danger",children:k}),A&&Object(ce.jsx)(pe,{variant:"success",children:"Profile Updated!"}),N&&Object(ce.jsx)(Oe,{}),Object(ce.jsxs)(le.a,{className:"p-3",children:[Object(ce.jsx)(le.a.Title,{children:"User Profile"}),Object(ce.jsxs)(X.a,{children:[Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"User Name"}),Object(ce.jsx)(X.a.Control,{type:"text",placeholder:"Enter user name",value:i,readOnly:!0})]}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"Email"}),Object(ce.jsx)(X.a.Control,{type:"text",placeholder:"Enter text",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"Password"}),Object(ce.jsx)(X.a.Control,{type:"password",placeholder:"Enter password",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(ce.jsxs)(X.a.Group,{className:"mb-3",children:[Object(ce.jsx)(X.a.Label,{children:"Confirm Password"}),Object(ce.jsx)(X.a.Control,{type:"password",placeholder:"Confirm password",value:g,onChange:function(e){return f(e.target.value)}})]}),Object(ce.jsx)($.LinkContainer,{to:"/".concat(t.params.userName),children:Object(ce.jsx)(Z.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault(),h!==g?C("passwords do not match"):(C(null),O(""),f(""),S(function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n,r){var c,s,i,o,l;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:U}),c=r(),s=c.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,re.a.put("/".concat(e,"/api/user/profile"),t,i);case 6:o=a.sent,l=o.data,n({type:R,payload:l}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:F,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(i,{id:L._id,userName:i,email:j,password:h})))},children:"Update!"})})]})]})]})},ke=function(){return Object(ce.jsxs)(H.BrowserRouter,{children:[Object(ce.jsx)(se,{}),Object(ce.jsx)("main",{className:"py-3",children:Object(ce.jsxs)(V.a,{children:[Object(ce.jsx)(Q.d,{path:"/",component:me,exact:!0}),Object(ce.jsx)(Q.d,{path:"/:userName",component:ve,exact:!0}),Object(ce.jsx)(Q.d,{path:"/:userName/new-page",component:Ce}),Object(ce.jsx)(Q.d,{path:"/:userName/page/:id",component:we}),Object(ce.jsx)(Q.d,{path:"/:userName/profile",component:Ne})]})})]})},Le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,273)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};c.a.render(Object(ce.jsx)(s.a,{store:z,children:Object(ce.jsx)(ke,{})}),document.getElementById("root")),Le()}},[[252,1,2]]]);
//# sourceMappingURL=main.a180b251.chunk.js.map